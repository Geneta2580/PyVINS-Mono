# ----------------------------------------------------------------------------
# 数据集参数 (Dataset Parameters)
# ----------------------------------------------------------------------------
# 数据集根目录的路径
# euroc：/home/pangjunxiang/dataset/Euroc/MH_01_easy
# tum：/home/pangjunxiang/dataset/TUM/freiburg1
# kitti:
dataset_path: "/home/geneta/dataset/source_dataset/euroc/MH_04_difficult"

# 支持euroc\tum\kitti数据集
dataset_type: "euroc"

# ============================================= 视觉前端配置参数 =============================================
# 窗口大小
window_size: 10

# 初始化三角化两帧视差阈值
initial_parallax: 70

# 初始SFM三角化重投影误差阈值
initial_sfm_reprojection_threshold: 1.5

# 选择关键帧最小视差 10
min_parallax: 10

# 静止视差
min_stationary_parallax: 0.5

# 最大特征点数
max_features_to_detect: 200

# 最小跟踪比例
min_track_ratio: 0.5

# 最小跟踪比例
min_kf_interval: 0.1 # 最小关键帧时间间隔(s) 0.2
max_kf_interval: 0.5 # 最大关键帧时间间隔(s)

# 特征点间的最小像素距离
min_dist: 30

# 相机内参
cam_intrinsics: [458.654, 0.000, 367.215,
                 0.000, 457.296, 248.375, 
                 0.000, 0.000, 1.000]

# 相机畸变参数
distortion_model: "fisheye"
distortion_coefficients: [-0.28340811, 0.07395907, 0.00019359, 1.76187114e-05]

# RANSAC相关参数
use_ransac: False
ransac_threshold: 1.0
ransac_prob: 0.999

# 是否可视化追踪结果
visualize: True

# ============================================= IMU配置参数 =============================================
# 重力模长
gravity: 9.81

# 注意这里只是sigma，不是sigma^2
accel_noise_sigma: 0.01          # 从0.002改为0.008
accel_bias_rw_sigma: 0.005        # 从0.0003改为0.001
gyro_noise_sigma: 0.0008        # 从0.00016968改为0.0008
gyro_bias_rw_sigma: 0.00008     # 从0.000019393改为0.00008


# ============================================= 地图管理参数 =============================================
# 三角化新地图点条件检查
max_depth: 400 # 地图点三角化深度检查是否正常
min_depth: 0.2
min_parallax_angle_deg: 5.0 # 三角化新地图点最小视差角度
triangulation_max_reprojection_error: 40.0 # 三角化新地图点最大重投影误差

# 优化新地图点最大重投影误差(只有开启优化后抑制不良优化点才有效)
optimization_max_reprojection_error: 40.0 # 优化新地图点最大重投影误差
optimization_max_delete_reprojection_error: 1000.0 # 优化新地图点最大删除重投影误差


# ============================================= 后端配置参数 =============================================
# 初始化窗口大小
init_window_size: 10

# 边缘化窗口大小
lag_window_size: 9 # 10-1

# 初始化外参
T_bc: [0.0148655429818, -0.999880929698, 0.00414029679422, -0.0216401454975,
       0.999557249008, -0.0149672133247, 0.025715529948, -0.064676986768,
      -0.0257744366974, 0.00375618835797, 0.999660727178, 0.00981073058949,
       0.0, 0.0, 0.0, 1.0]

# 视觉噪声sigma
visual_noise_sigma: 2.0

# 是否使用深度降权
use_depth_weight: False

# 深度降权参数
depth_weight_base: 5.0    # 基础深度阈值（米），超过此深度开始降权
depth_weight_max: 3.0     # 最大噪声倍数（深度很远时噪声增加到3倍）
depth_weight_power: 1.5    # 深度权重指数，控制降权曲线的陡峭程度 

# 新路标点噪声膨胀比例 (权重膨胀比例越大，新路标点权重越小)
new_landmark_inflation_ratio: 1.0    


# ============================================= 输出结果配置 =============================================
# 是否使用IMU输出
use_imu_output: False

# 是否可视化
enable_viewer: True

# 输出日志文件路径
log_dir: "output/log"

# 输出轨迹文件路径
trajectory_output_path: "output/estimated_trajectory.txt" 

